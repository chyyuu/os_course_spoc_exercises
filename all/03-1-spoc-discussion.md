# lec5 SPOC思考题

## 个人思考题
---

### 请简要分析最优匹配，最差匹配，最先匹配，buddy systemm分配算法的优势和劣势，并尝试提出一种更有效的连续内存分配算法 (w3l1)

最先匹配：优点：简单，在高地址空间会产生大块空闲分区(还没到高地址，就找到符合的了，导致高地址一直用不上)。缺点：外部碎片、分配大块时较慢

最佳匹配：优点：大部分分配尺寸小时，效果很好；避免大块被切分；减小了外部碎片的尺寸；相对简单。缺点：外碎片越小越难利用(无用)；释放分区较慢。

最差匹配：优点：小碎片较少；中等大小的分配较多时，效果最好。缺点：释放分区较慢；容易破坏大的空间，分配需要大空间的内存较难


### 5.1 计算机体系结构和内存层次
MMU的工作机理？

CPU里还有高速缓存，加快访存速度。CPU结构：算数逻辑单元ALU、寄存器、控制逻辑、高速缓存、存储管理单元MMU。在段式存储管理下，段的访问：通过二元组(s，addr)进行。其中s为段号，addr为段内偏移。用短号去查进程的段表。段表中记录着多个段描述符，其基本内容为段的基本地址和长度。存储管理单元MMU会把段号对应的段描述符中的长度，和addr段内偏移取出来作比较，看看是不是越界。如果addr偏移小于长度，则是一个合法的访问，MMU就会把段基本地址和偏移加到一起，找到实际要访问的内容。



### L1和L2高速缓存有什么区别？(来自百度)

L1 Cache(一级缓存)是CPU第一层高速缓存，位于CPU内核的旁边，是与CPU结合最为紧密的CPU缓存。
内置的L1高速缓存的容量和结构对CPU的性能影响较大，不过高速缓冲存储器均由静态RAM组成，结构较复杂，在CPU管芯面积不能太大的情况下，L1级高速缓存的容量不可能做得太大，一般L1缓存的容量通常在32—256KB。

L2 Cache(二级缓存)是CPU的第二层高速缓存，它是处理器内部的一些缓冲存储器，其作用跟内存一样。分内部和外部两种芯片。内部的芯片二级缓存运行速度与主频相同，而外部的二级缓存则只有主频的一半。
L2高速缓存容量也会影响CPU的性能，原则是越大越好,普通台式机CPU的L2缓存一般为128KB到2MB或者更高，笔记本、服务器和工作站上用CPU的L2高速缓存最高可达1MB-3MB。

### 5.2 地址空间和地址生成
编译、链接和加载的过程了解？

- [x]  

>  

动态链接如何使用？

- [x]  

>  


### 5.3 连续内存分配
什么是内碎片、外碎片？

外碎片，指分配单元之间的未被使用的内存，如分配了进程1、2、3。进程2先结束，要分配进程4，但是2结束后，空出来的内存不足以容纳4，产生了外碎片。
内碎片，指分配单元内部的未被使用的内存，取决于分配单元大小是否要取整，如进程1需要510字节，而分配只能按512字节分，则剩下的2字节就是内部碎片。


为什么最先匹配会越用越慢？

答：还没到高地址，就找到符合的了，导致高地址一直用不上，大量堆积在低地址，往后找高地址会越来越慢


为什么最差匹配会的外碎片少？

答：空闲分区按从大到小排序，产生的外碎片较少。


>  

在几种算法中分区释放后的合并处理如何做？

答：释放时，和临近的合并。而合并是和地址临近的合并，不是大小，所以会麻烦一点，要重新排序。
